# Barn Configuration
# Generated by: barn config install

[service]
# Logging verbosity: debug, info, warn, error
log_level = "info"

# DEPRECATED: Use [load_levels] section instead
# max_concurrent_jobs = 4

# How often running jobs update their heartbeat (seconds)
heartbeat_interval_seconds = 5

# Heartbeat age before a job is considered orphaned (seconds)
stale_heartbeat_threshold_seconds = 30

[load_levels]
# Maximum concurrent high load jobs (CPU/GPU intensive)
max_high_jobs = 2

# Maximum concurrent medium load jobs (general purpose)
max_medium_jobs = 8

# Maximum concurrent low load jobs (network/IO intensive)
max_low_jobs = 32

[jobs]
# Maximum time a job can run before being killed (seconds)
default_timeout_seconds = 3600

# Number of retry attempts for failed jobs
max_retries = 3

# Initial delay before first retry (seconds)
retry_delay_seconds = 30

# Multiplier applied to delay after each retry
retry_backoff_multiplier = 2.0

# Only retry on these exit codes (empty = retry all failures)
retry_on_exit_codes = []

[cleanup]
# Enable automatic cleanup of old jobs
enabled = true

# Remove jobs older than this (hours)
max_age_hours = 72

# How often the cleanup task runs (minutes)
cleanup_interval_minutes = 60

# Preserve failed jobs for debugging
keep_failed_jobs = true

# How long to keep failed jobs (hours)
keep_failed_jobs_hours = 168

[storage]
# Root directory for all Barn data
base_dir = "/tmp/barn"

# Maximum disk space Barn can use (GB)
max_disk_usage_gb = 50

# Keep work/input and work/output after job completion
preserve_work_dir = false
